<h1>Passing Arguments</h1><div><p>Just like a REST API, it&apos;s common to pass arguments to an endpoint in a GraphQL API. By defining the arguments in the schema language, typechecking happens automatically. Each argument must be named and have a type. For example, in the <a href="/graphql-js/basic-types/">Basic Types documentation</a> we had an endpoint called <code>rollThreeDice</code>:</p><pre class="prism language-javascript">type Query <span class="punctuation">{</span>
  rollThreeDice<span class="punctuation">:</span> <span class="punctuation">[</span>Int<span class="punctuation">]</span>
<span class="punctuation">}</span></pre><p>Instead of hardcoding &#x201C;three&#x201D;, we might want a more general function that rolls <code>numDice</code> dice, each of which have <code>numSides</code> sides. We can add arguments to the GraphQL schema language like this:</p><pre class="prism language-javascript">type Query <span class="punctuation">{</span>
  <span class="function">rollDice</span><span class="punctuation">(</span>numDice<span class="punctuation">:</span> Int<span class="operator">!</span><span class="punctuation">,</span> numSides<span class="punctuation">:</span> Int<span class="punctuation">)</span><span class="punctuation">:</span> <span class="punctuation">[</span>Int<span class="punctuation">]</span>
<span class="punctuation">}</span></pre><p>The exclamation point in <code>Int!</code> indicates that <code>numDice</code> can&apos;t be null, which means we can skip a bit of validation logic to make our server code simpler. We can let <code>numSides</code> be null and assume that by default a die has 6 sides.</p><p>So far, our resolver functions took no arguments. When a resolver takes arguments, they are passed as one &#x201C;args&#x201D; object, as the first argument to the function. So rollDice could be implemented as:</p><pre class="prism language-javascript"><span class="keyword">var</span> root <span class="operator">=</span> <span class="punctuation">{</span>
  rollDice<span class="punctuation">:</span> <span class="punctuation">(</span>args<span class="punctuation">)</span> <span class="operator">=</span><span class="operator">&gt;</span> <span class="punctuation">{</span>
    <span class="keyword">var</span> output <span class="operator">=</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">;</span>
    <span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">var</span> i <span class="operator">=</span> <span class="number">0</span><span class="punctuation">;</span> i <span class="operator">&lt;</span> args<span class="punctuation">.</span>numDice<span class="punctuation">;</span> i<span class="operator">++</span><span class="punctuation">)</span> <span class="punctuation">{</span>
      output<span class="punctuation">.</span><span class="function">push</span><span class="punctuation">(</span><span class="number">1</span> <span class="operator">+</span> Math<span class="punctuation">.</span><span class="function">floor</span><span class="punctuation">(</span>Math<span class="punctuation">.</span><span class="function">random</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">*</span> <span class="punctuation">(</span>args<span class="punctuation">.</span>numSides <span class="operator">||</span> <span class="number">6</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
    <span class="keyword">return</span> output<span class="punctuation">;</span>
  <span class="punctuation">}</span>
<span class="punctuation">}</span><span class="punctuation">;</span></pre><p>It&apos;s convenient to use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" target="_blank" rel="nofollow noopener noreferrer">ES6 destructuring assignment</a> for these parameters, since you know what format they will be. So we can also write <code>rollDice</code> as</p><pre class="prism language-javascript"><span class="keyword">var</span> root <span class="operator">=</span> <span class="punctuation">{</span>
  rollDice<span class="punctuation">:</span> <span class="punctuation">(</span><span class="punctuation">{</span>numDice<span class="punctuation">,</span> numSides<span class="punctuation">}</span><span class="punctuation">)</span> <span class="operator">=</span><span class="operator">&gt;</span> <span class="punctuation">{</span>
    <span class="keyword">var</span> output <span class="operator">=</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">;</span>
    <span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">var</span> i <span class="operator">=</span> <span class="number">0</span><span class="punctuation">;</span> i <span class="operator">&lt;</span> numDice<span class="punctuation">;</span> i<span class="operator">++</span><span class="punctuation">)</span> <span class="punctuation">{</span>
      output<span class="punctuation">.</span><span class="function">push</span><span class="punctuation">(</span><span class="number">1</span> <span class="operator">+</span> Math<span class="punctuation">.</span><span class="function">floor</span><span class="punctuation">(</span>Math<span class="punctuation">.</span><span class="function">random</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">*</span> <span class="punctuation">(</span>numSides <span class="operator">||</span> <span class="number">6</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
    <span class="keyword">return</span> output<span class="punctuation">;</span>
  <span class="punctuation">}</span>
<span class="punctuation">}</span><span class="punctuation">;</span></pre><p>If you&apos;re familiar with destructuring, this is a bit nicer because the line of code where <code>rollDice</code> is defined tells you about what the arguments are.</p><p>The entire code for a server that hosts this <code>rollDice</code> API is:</p><pre class="prism language-javascript"><span class="keyword">var</span> express <span class="operator">=</span> <span class="function">require</span><span class="punctuation">(</span><span class="string">&apos;express&apos;</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">var</span> graphqlHTTP <span class="operator">=</span> <span class="function">require</span><span class="punctuation">(</span><span class="string">&apos;express-graphql&apos;</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">var</span> <span class="punctuation">{</span> buildSchema <span class="punctuation">}</span> <span class="operator">=</span> <span class="function">require</span><span class="punctuation">(</span><span class="string">&apos;graphql&apos;</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span spellcheck="true" class="comment">// Construct a schema, using GraphQL schema language</span>
<span class="keyword">var</span> schema <span class="operator">=</span> <span class="function">buildSchema</span><span class="punctuation">(</span><span class="template-string"><span class="string">`type Query { rollDice(numDice: Int!, numSides: Int): [Int] }`</span></span><span class="punctuation">)</span><span class="punctuation">;</span>

<span spellcheck="true" class="comment">// The root provides a resolver function for each API endpoint</span>
<span class="keyword">var</span> root <span class="operator">=</span> <span class="punctuation">{</span>
rollDice<span class="punctuation">:</span> <span class="punctuation">(</span><span class="punctuation">{</span>numDice<span class="punctuation">,</span> numSides<span class="punctuation">}</span><span class="punctuation">)</span> <span class="operator">=</span><span class="operator">&gt;</span> <span class="punctuation">{</span>
<span class="keyword">var</span> output <span class="operator">=</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">;</span>
<span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">var</span> i <span class="operator">=</span> <span class="number">0</span><span class="punctuation">;</span> i <span class="operator">&lt;</span> numDice<span class="punctuation">;</span> i<span class="operator">++</span><span class="punctuation">)</span> <span class="punctuation">{</span>
output<span class="punctuation">.</span><span class="function">push</span><span class="punctuation">(</span><span class="number">1</span> <span class="operator">+</span> Math<span class="punctuation">.</span><span class="function">floor</span><span class="punctuation">(</span>Math<span class="punctuation">.</span><span class="function">random</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">\*</span> <span class="punctuation">(</span>numSides <span class="operator">||</span> <span class="number">6</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="punctuation">}</span>
<span class="keyword">return</span> output<span class="punctuation">;</span>
<span class="punctuation">}</span>
<span class="punctuation">}</span><span class="punctuation">;</span>

<span class="keyword">var</span> app <span class="operator">=</span> <span class="function">express</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
app<span class="punctuation">.</span><span class="function">use</span><span class="punctuation">(</span><span class="string">&apos;/graphql&apos;</span><span class="punctuation">,</span> <span class="function">graphqlHTTP</span><span class="punctuation">(</span><span class="punctuation">{</span>
schema<span class="punctuation">:</span> schema<span class="punctuation">,</span>
rootValue<span class="punctuation">:</span> root<span class="punctuation">,</span>
graphiql<span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
app<span class="punctuation">.</span><span class="function">listen</span><span class="punctuation">(</span><span class="number">4000</span><span class="punctuation">)</span><span class="punctuation">;</span>
console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">&apos;Running a GraphQL API server at localhost:4000/graphql&apos;</span><span class="punctuation">)</span><span class="punctuation">;</span></pre><p>When you call this API, you have to pass each argument by name. So for the server above, you could issue this GraphQL query to roll three six-sided dice:</p><pre class="prism language-javascript"><span class="punctuation">{</span>
<span class="function">rollDice</span><span class="punctuation">(</span>numDice<span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span> numSides<span class="punctuation">:</span> <span class="number">6</span><span class="punctuation">)</span>
<span class="punctuation">}</span></pre><p>If you run this code with <code>node server.js</code> and browse to <a href="http://localhost:4000/graphql">http://localhost:4000/graphql</a> you can try out this API.</p><p>When you&apos;re passing arguments in code, it&apos;s generally better to avoid constructing the whole query string yourself. Instead, you can use <code>\$</code> syntax to define variables in your query, and pass the variables as a separate map.</p><p>For example, some JavaScript code that calls our server above is:</p><pre class="prism language-javascript"><span class="keyword">var</span> dice <span class="operator">=</span> <span class="number">3</span><span class="punctuation">;</span>
<span class="keyword">var</span> sides <span class="operator">=</span> <span class="number">6</span><span class="punctuation">;</span>
<span class="keyword">var</span> query <span class="operator">=</span> <span class="template-string"><span class="string">`query RollDice($dice: Int!, $sides: Int) { rollDice(numDice: $dice, numSides: $sides) }`</span></span><span class="punctuation">;</span>

<span class="function">fetch</span><span class="punctuation">(</span><span class="string">&apos;/graphql&apos;</span><span class="punctuation">,</span> <span class="punctuation">{</span>
method<span class="punctuation">:</span> <span class="string">&apos;POST&apos;</span><span class="punctuation">,</span>
headers<span class="punctuation">:</span> <span class="punctuation">{</span>
<span class="string">&apos;Content-Type&apos;</span><span class="punctuation">:</span> <span class="string">&apos;application/json&apos;</span><span class="punctuation">,</span>
<span class="string">&apos;Accept&apos;</span><span class="punctuation">:</span> <span class="string">&apos;application/json&apos;</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
body<span class="punctuation">:</span> JSON<span class="punctuation">.</span><span class="function">stringify</span><span class="punctuation">(</span><span class="punctuation">{</span>
query<span class="punctuation">,</span>
variables<span class="punctuation">:</span> <span class="punctuation">{</span> dice<span class="punctuation">,</span> sides <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span>
<span class="punctuation">}</span><span class="punctuation">)</span>
<span class="punctuation">.</span><span class="function">then</span><span class="punctuation">(</span>r <span class="operator">=</span><span class="operator">&gt;</span> r<span class="punctuation">.</span><span class="function">json</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span>
<span class="punctuation">.</span><span class="function">then</span><span class="punctuation">(</span>data <span class="operator">=</span><span class="operator">&gt;</span> console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">&apos;data returned:&apos;</span><span class="punctuation">,</span> data<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span></pre><p>Using <code>$dice</code> and <code>$sides</code> as variables in GraphQL means we don&apos;t have to worry about escaping on the client side.</p><p>With basic types and argument passing, you can implement anything you can implement in a REST API. But GraphQL supports even more powerful queries. You can replace multiple API calls with a single API call if you learn how to <a href="/graphql-js/object-types/">define your own object types</a>.</p></div>
