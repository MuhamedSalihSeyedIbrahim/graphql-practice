<h1>GraphQL Clients</h1><div><p>Since a GraphQL API has more underlying structure than a REST API, there are more powerful clients like <a href="https://facebook.github.io/relay/" target="_blank" rel="nofollow noopener noreferrer">Relay</a> which can automatically handle batching, caching, and other features. But you don&apos;t need a complex client to call a GraphQL server. With <code>express-graphql</code>, you can just send an HTTP POST request to the endpoint you mounted your GraphQL server on, passing the GraphQL query as the <code>query</code> field in a JSON payload.</p><p>For example, let&apos;s say we mounted a GraphQL server on <a href="http://localhost:4000/graphql">http://localhost:4000/graphql</a> as in the example code for <a href="/graphql-js/running-an-express-graphql-server/">running an Express GraphQL server</a>, and we want to send the GraphQL query <code>{ hello }</code>. We can do this from the command line with <code>curl</code>. If you paste this into a terminal:</p><pre class="prism language-bash">curl <span class="operator">-</span>X POST \
<span class="operator">-</span>H <span class="string">&quot;Content-Type: application/json&quot;</span> \
<span class="operator">-</span>d <span class="string">&apos;{&quot;query&quot;: &quot;{ hello }&quot;}&apos;</span> \
http<span class="punctuation">:</span><span class="operator">/</span><span class="operator">/</span>localhost<span class="punctuation">:</span><span class="number">4000</span><span class="operator">/</span>graphql</pre><p>You should see the output returned as JSON:</p><pre class="prism language-bash"><span class="punctuation">{</span><span class="string">&quot;data&quot;</span><span class="punctuation">:</span><span class="punctuation">{</span><span class="string">&quot;hello&quot;</span><span class="punctuation">:</span><span class="string">&quot;Hello world!&quot;</span><span class="punctuation">}</span><span class="punctuation">}</span></pre><p>If you prefer to use a graphical user interface to send a test query, you can use clients such as <a href="https://github.com/graphql/graphiql" target="_blank" rel="nofollow noopener noreferrer">GraphiQL</a> and <a href="https://github.com/getinsomnia/insomnia" target="_blank" rel="nofollow noopener noreferrer">Insomnia</a>.</p><p>It&apos;s also simple to send GraphQL from the browser. Open up <a href="http://localhost:4000/graphql">http://localhost:4000/graphql</a>, open a developer console, and paste in:</p><pre class="prism language-javascript"><span class="function">fetch</span><span class="punctuation">(</span><span class="string">&apos;/graphql&apos;</span><span class="punctuation">,</span> <span class="punctuation">{</span>
  method<span class="punctuation">:</span> <span class="string">&apos;POST&apos;</span><span class="punctuation">,</span>
  headers<span class="punctuation">:</span> <span class="punctuation">{</span>
    <span class="string">&apos;Content-Type&apos;</span><span class="punctuation">:</span> <span class="string">&apos;application/json&apos;</span><span class="punctuation">,</span>
    <span class="string">&apos;Accept&apos;</span><span class="punctuation">:</span> <span class="string">&apos;application/json&apos;</span><span class="punctuation">,</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
  body<span class="punctuation">:</span> JSON<span class="punctuation">.</span><span class="function">stringify</span><span class="punctuation">(</span><span class="punctuation">{</span>query<span class="punctuation">:</span> <span class="string">&quot;{ hello }&quot;</span><span class="punctuation">}</span><span class="punctuation">)</span>
<span class="punctuation">}</span><span class="punctuation">)</span>
  <span class="punctuation">.</span><span class="function">then</span><span class="punctuation">(</span>r <span class="operator">=</span><span class="operator">&gt;</span> r<span class="punctuation">.</span><span class="function">json</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span>
  <span class="punctuation">.</span><span class="function">then</span><span class="punctuation">(</span>data <span class="operator">=</span><span class="operator">&gt;</span> console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">&apos;data returned:&apos;</span><span class="punctuation">,</span> data<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span></pre><p>You should see the data returned, logged in the console:</p><pre class="prism language-undefined">data returned<span class="punctuation">:</span> Object <span class="punctuation">{</span> hello<span class="punctuation">:</span> <span class="string">&quot;Hello world!&quot;</span> <span class="punctuation">}</span></pre><p>In this example, the query was just a hardcoded string. As your application becomes more complex, and you add GraphQL endpoints that take arguments as described in <a href="/graphql-js/passing-arguments/">Passing Arguments</a>, you will want to construct GraphQL queries using variables in client code. You can do this by including a keyword prefixed with a dollar sign in the query, and passing an extra <code>variables</code> field on the payload.</p><p>For example, let&apos;s say you&apos;re running the example server from <a href="/graphql-js/passing-arguments/">Passing Arguments</a> that has a schema of</p><pre class="prism language-javascript">type Query <span class="punctuation">{</span>
  <span class="function">rollDice</span><span class="punctuation">(</span>numDice<span class="punctuation">:</span> Int<span class="operator">!</span><span class="punctuation">,</span> numSides<span class="punctuation">:</span> Int<span class="punctuation">)</span><span class="punctuation">:</span> <span class="punctuation">[</span>Int<span class="punctuation">]</span>
<span class="punctuation">}</span></pre><p>You could access this from JavaScript with the code:</p><pre class="prism language-javascript"><span class="keyword">var</span> dice <span class="operator">=</span> <span class="number">3</span><span class="punctuation">;</span>
<span class="keyword">var</span> sides <span class="operator">=</span> <span class="number">6</span><span class="punctuation">;</span>
<span class="keyword">var</span> query <span class="operator">=</span> <span class="template-string"><span class="string">`query RollDice($dice: Int!, $sides: Int) {
  rollDice(numDice: $dice, numSides: $sides)
}`</span></span><span class="punctuation">;</span>

<span class="function">fetch</span><span class="punctuation">(</span><span class="string">&apos;/graphql&apos;</span><span class="punctuation">,</span> <span class="punctuation">{</span>
method<span class="punctuation">:</span> <span class="string">&apos;POST&apos;</span><span class="punctuation">,</span>
headers<span class="punctuation">:</span> <span class="punctuation">{</span>
<span class="string">&apos;Content-Type&apos;</span><span class="punctuation">:</span> <span class="string">&apos;application/json&apos;</span><span class="punctuation">,</span>
<span class="string">&apos;Accept&apos;</span><span class="punctuation">:</span> <span class="string">&apos;application/json&apos;</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">,</span>
body<span class="punctuation">:</span> JSON<span class="punctuation">.</span><span class="function">stringify</span><span class="punctuation">(</span><span class="punctuation">{</span>
query<span class="punctuation">,</span>
variables<span class="punctuation">:</span> <span class="punctuation">{</span> dice<span class="punctuation">,</span> sides <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span>
<span class="punctuation">}</span><span class="punctuation">)</span>
<span class="punctuation">.</span><span class="function">then</span><span class="punctuation">(</span>r <span class="operator">=</span><span class="operator">&gt;</span> r<span class="punctuation">.</span><span class="function">json</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span>
<span class="punctuation">.</span><span class="function">then</span><span class="punctuation">(</span>data <span class="operator">=</span><span class="operator">&gt;</span> console<span class="punctuation">.</span><span class="function">log</span><span class="punctuation">(</span><span class="string">&apos;data returned:&apos;</span><span class="punctuation">,</span> data<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span></pre><p>Using this syntax for variables is a good idea because it automatically prevents bugs due to escaping, and it makes it easier to monitor your server.</p><p>In general, it will take a bit more time to set up a GraphQL client like Relay, but it&apos;s worth it to get more features as your application grows. You might want to start out just using HTTP requests as the underlying transport layer, and switching to a more complex client as your application gets more complex.</p><p>At this point you can write a client and server in GraphQL for an API that receives a single string. To do more, you will want to <a href="/graphql-js/basic-types/">learn how to use the other basic data types</a>.</p></div>
